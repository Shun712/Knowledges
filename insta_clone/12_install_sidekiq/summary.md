# 12 メールのジョブの永続化を実装

# やったこと
- メールのジョブを永続化できるように実装
- ActiveJobのアダプターにはsidekiqを利用
- ダッシュボード用にsinatraもインストールする

# Active Jobとは?
ActiveJobとは、ジョブを宣言し、それによって**バックエンドで様々な方法によるキュー操作を実行**するためのフレームワークである。  
ジョブには、請求書発行やメール配信などの処理がジョブになり、これらを分割して並列実行もできる。

> [Active Jobとは?](https://github.com/Shun712/Knowledges/blob/master/insta_clone/12_install_sidekiq/index/active_job.md)

# sidekiqとは？
Rails アプリで**非同期処理を行うためのライブラリ**である。  
つまり、非同期処理を行うためのサーバーのようなもの。  
導入することで複数のジョブを同時に実行でき、メモリを節約できる。

前提条件として、`Redis`が必要になるのでインストールする。  
`Redis`はキューの受け皿となり、キューが保存されるので(メール送信処理などの)ジョブが永続される。

> [sidekiqとは？](https://github.com/Shun712/Knowledges/blob/master/insta_clone/12_install_sidekiq/index/sidekiq.md)

# 学んだこと
- 非同期処理で実装する意味があるのかと最初疑問だった。しかし、処理の数が多くなるとパフォーマンスが低下する可能性がある。また、想定外でサーバーが再起動してしまった場合、重要なメール送信や請求書の発行などのジョブが失われ多大な問題が起こってくる。
- redisはセッションデータの保存に利用されることしか知らなかったが、DBの高速な処理に向いている上にジョブの受け皿としてキューまで保存でき、ジョブの永続化として一役も担っている。